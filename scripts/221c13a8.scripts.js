"use strict";angular.module("globApp",["angularBootstrapNavTree"]),angular.module("globApp").controller("MainCtrl",["$scope","$http",function(a,b){function c(a){return document.getElementById(a)}function d(a){var b=[],c={},d=e(a);return d.forEach(function(a){var d={};if(d.label=a.name,d.data=a,a.parentPath){var e=c[a.parentPath]||{};e.children||(e.children=[]),e.children.push(d)}else b.push(d);c[a.path]=d}),b}function e(a){var b=[];return a.forEach(function(a){var c={},d=a.replace(/[^\/]*$/,"");d&&(c.parentPath=d.slice(0,-1)),c.path=a,c.name=a.replace(/^.*[\\\/]/,""),b.push(c)}),b}var f=this,g=new plupload.Uploader({runtimes:"html5",drop_element:"drop-target",browse_button:"drop-target",max_file_size:"10mb",upload:"upload.php"});g.bind("Init",function(){if(g.features.dragdrop){angular.element("#debug").hide();var a=c("drop-target");a.ondragover=function(a){a.dataTransfer.dropEffect="copy"},a.ondragenter=function(){this.className="dragover"},a.ondragleave=function(){this.className=""},a.ondrop=function(){this.className=""}}}),this.createFolderList=function(a){var b=[];return _.each(a,function(a){var c=a.split("/");if(c.length>1){c.splice(c.length-1,1);for(var d="",e=0;e<c.length;e++)d&&(d+="/"),d+=c[e],-1===b.indexOf(d)&&b.push(d)}b.push(a)}),b},g.bind("FilesAdded",function(b,c){var e=_.pluck(c,"relativePath");h=f.createFolderList(e),a.treeData=d(h),a.loadingTree=!1,a.$apply()}),setTimeout(function(){g.init()},100);var h=["README.md",".hiddenfile","index.html","src","src/app.js","src/data.js","src/.hiddenfile","src/lib","src/lib/angular.js","img","img/logo.png"];a.treeData=d(h),a.glob={pattern:"**/*.js",options:{dot:!0}},a.submitGlob=function(b){return a.glob.pattern.length?(console.log(JSON.stringify(a.glob.pattern)),void(a.globResult=minimatch.match(h,a.glob.pattern,a.glob.options))):void b.preventDefault()},a.repo="github.com/yeoman/generator",a.githubImport=function(){var c=a.repo.split("github.com/")[1],e="https://api.github.com/repos/"+c+"/git/trees/master?recursive=1";a.loadingTree=!0,a.treeData=[],b({method:"GET",url:e}).success(function(b){h=_.pluck(b.tree,"path"),a.treeData=d(h),a.loadingTree=!1})}}]);